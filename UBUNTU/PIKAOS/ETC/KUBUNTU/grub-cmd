quiet splash rw nvidia-drm.modeset=1 nvidia.NVreg_PreserveVideoMemoryAllocations=1 nvidia.NVreg_TemporaryFilePath=/var/tmp io_delay=none rootdelay=0 iomem=relaxed mitigations=off


Explanation of Each Parameter:

    quiet splash → Hides most boot messages and shows the splash screen instead.
    rw → Mounts the root filesystem as read-write early in the boot process.
    nvidia-drm.modeset=1 → Enables NVIDIA Kernel Mode Setting (KMS) for better Wayland support and smoother transitions.
    nvidia.NVreg_PreserveVideoMemoryAllocations=1 → Helps preserve VRAM across suspend/resume cycles (useful if you experience screen corruption after suspend).
    nvidia.NVreg_TemporaryFilePath=/var/tmp → Specifies where temporary files related to NVIDIA should be stored (useful if you have limited /tmp space).
    io_delay=none → Disables unnecessary I/O delays, which may improve boot times slightly.
    rootdelay=0 → Sets the delay before mounting the root filesystem to 0 seconds. (If your system needs a delay, this might cause issues.)
    iomem=relaxed → Allows user-space programs to access certain memory regions that are normally restricted (sometimes needed for certain hardware monitoring tools).
    mitigations=off → Disables CPU vulnerability mitigations (Spectre, Meltdown, etc.). This improves performance but reduces security, so use it only if you understand the risks.




/etc/modprobe.d/nvidia.conf

options nvidia NVreg_EnableMSI=1
options nvidia NVreg_EnablePCIeGen3=1
options nvidia NVreg_UsePageAttributeTable=1
options nvidia NVreg_RegistryDwords="RMUseSwI2c=0x01;RMI2cSpeed=100"
options nvidia-drm modeset=1

---------------------------------------

/etc/modprobe.d/nvidia.conf

options nvidia NVreg_EnableMSI=1
options nvidia NVreg_EnablePCIeGen3=1
options nvidia NVreg_UsePageAttributeTable=1
options nvidia NVreg_RegistryDwords="RMUseSwI2c=0x01;RMI2cSpeed=100"
options nvidia NVreg_PreserveVideoMemoryAllocations=1
options nvidia NVreg_TemporaryFilePath="/var/tmp"
options nvidia-drm modeset=1

sudo nano /etc/default/grub

GRUB_CMDLINE_LINUX_DEFAULT="quiet splash rw nvidia-drm.modeset=1 rd.driver.blacklist=nouveau modprobe.blacklist=nouveau io_delay=none rootdelay=0 iomem=relaxed mitigations=off"

GRUB_CMDLINE_LINUX_DEFAULT="quiet splash rd.driver.blacklist=nouveau modprobe.blacklist=nouveau"

sudo nano /etc/modprobe.d/blacklist-nouveau.conf

blacklist nouveau
options nouveau modeset=0


sudo update-initramfs -u
sudo update-grub
sudo reboot

---------------------------------

Why This Separation?

    /etc/modprobe.d/nvidia.conf applies settings to the NVIDIA kernel module.
    /etc/default/grub applies options to the Linux kernel itself.

What Should You Do in Kubuntu?

To ensure stability and proper loading, you should:

    Use /etc/modprobe.d/nvidia.conf for NVIDIA module parameters.
    Use /etc/default/grub for general kernel parameters.

Solus vs. Kubuntu Approach:
Setting	Solus (clr-boot-manager)	Kubuntu (GRUB)
nvidia-drm.modeset=1	Kernel parameter ✅	Kernel parameter ✅ (in GRUB)
nvidia.NVreg_PreserveVideoMemoryAllocations=1	Kernel parameter ✅	Use modprobe (/etc/modprobe.d/nvidia.conf)
nvidia.NVreg_TemporaryFilePath=/var/tmp	Kernel parameter ✅	Use modprobe (/etc/modprobe.d/nvidia.conf)
io_delay=none	Kernel parameter ✅	Kernel parameter ✅ (in GRUB)
rootdelay=0	Kernel parameter ✅	Kernel parameter ✅ (in GRUB)
iomem=relaxed	Kernel parameter ✅	Kernel parameter ✅ (in GRUB)
mitigations=off	Kernel parameter ✅	Kernel parameter ✅ (in GRUB)
Conclusion

If you want a reliable setup in Kubuntu, move the NVIDIA-specific parameters to modprobe (/etc/modprobe.d/nvidia.conf) and leave only actual kernel parameters in GRUB (/etc/default/grub).

This is the Ubuntu-recommended way, and it ensures your settings persist across driver updates.
